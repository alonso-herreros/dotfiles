- defaults:
    link:
      create: true
      relink: true
    shell:
      stderr: true

- clean:
    ~/:
    ~/.config:
      recursive: true

- shell:
  - command: |
      {
          echo "# AUTO-GENERATED FILE. DO NOT EDIT."
          echo "# See '~/.dotfiles/install.conf.yaml' ."
          cat config/zsh-abbr/user-abbreviations.base
          scripts/utils/abbr-parse config/shell/alias.sh
          scripts/utils/abbr-parse -m git config/git/alias
      } > "${ABBR_USER_ABBREVIATIONS_FILE:?}"
    description: Adding zsh abbreviations
    quiet: true

- create:
    - $XDG_STATE_HOME/clipse


- link:
    # How uncivilized...
    ~/.bashrc: config/bash/bashrc
    ~/.zshrc: config/zsh/.zshrc
    ~/.vimrc: config/vim/vimrc
    ~/.screenrc: config/screen/screenrc

    # It's quicker to list the ones i _don't_ want linked...
    ~/.config/:
      glob: true
      path: config/*
      exclude:
        - config/vimium

    # App flags - removed trailing slash to specify ~/.config/ twice
    ~/.config:
      glob: true
      path: config/app-flags/*.conf

    ~/.vim/:
      glob: true
      path: config/vim/*
      eclude: [ config/vim/vimrc ]

    # Okular stores the actual config in a rather peculiar place
    ~/.local/share/kxmlgui5/okular: config/okular

    # Why do they make these things so hard?
    ~/.local/share/qalculate/definitions: config/qalculate/definitions

    # Desktop Entries
    ~/.local/share/applications/:
      glob: true
      path: local/share/applications/*.desktop

    # Oh My Zsh included!
    ~/.scripts: scripts

    # Warning: this is a bunch of files added to path!
    ~/.local/bin/:
      glob: True
      path: scripts/.to-path/**

    ~/.ssh/config: private/ssh/config

- shell:
  - [git submodule update --init --recursive --remote .dotbot config scripts local sys, Installing submodules]
  - [ya pkg upgrade, Updating yazi packages]
